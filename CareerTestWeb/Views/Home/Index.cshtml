@{
    ViewData["Title"] = "CareerMatch - Khám phá nghề nghiệp phù hợp";
}

<!-- Hero Section -->
<section class="hero-section">
    <div class="container">
        <h1 class="hero-title">Khám Phá Nghề Nghiệp Phù Hợp Với Tính Cách MBTI</h1>
        <p class="hero-subtitle">Bài trắc nghiệm MBTI sẽ giúp bạn hiểu rõ bản thân, khám phá điểm mạnh và tìm ra nghề nghiệp phù hợp nhất với tính cách của bạn.</p>
        <a asp-controller="CareerTest" asp-action="QuickTest" class="btn btn-outline-light btn-lg">Test Nhanh (20 câu) <i class="fas fa-bolt ms-2"></i></a>
        <a asp-controller="CareerTest" asp-action="Test" class="btn btn-light btn-lg">Làm Bài Test Ngay <i class="fas fa-arrow-right ms-2"></i></a>

    </div>
    <img class="mbti-header__image-left lazyloaded" data-src="https://cdn-new.topcv.vn/unsafe/https://static.topcv.vn/v4/image/mbti/mbti-top-left.png" alt="MBTI image top left" src="https://cdn-new.topcv.vn/unsafe/https://static.topcv.vn/v4/image/mbti/mbti-top-left.png">

    <img class="mbti-header__image-right lazyloaded" data-src="https://cdn-new.topcv.vn/unsafe/https://static.topcv.vn/v4/image/mbti/mbti-top-right.png" alt="MBTI image top right" src="https://cdn-new.topcv.vn/unsafe/https://static.topcv.vn/v4/image/mbti/mbti-top-right.png">
</section>

<!-- Personality Types Section -->
<section id="personality-types" class="py-5 bg-light">
    <div class="container">
        <h2 class="section-title text-center mb-5">16 Nhóm Tính Cách MBTI</h2>

        <div class="position-relative">
            <button class="btn btn-nav prev position-absolute top-50 start-0 translate-middle-y z-3 d-none d-md-block">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="btn btn-nav next position-absolute top-50 end-0 translate-middle-y z-3 d-none d-md-block">
                <i class="fas fa-chevron-right"></i>
            </button>

            <div class="personality-carousel overflow-hidden">
                <div class="personality-track d-flex">
                    @{
                        var personalityTypes = new[]
                        {
                    new { Type = "ENFJ", Name = "Người Chỉ Dạy (Teacher)", Color = "primary" },
                    new { Type = "ENFP", Name = "Nhà Vô Địch (Champion)", Color = "success" },
                    new { Type = "ENTJ", Name = "Nhà Điều Hành (Executive)", Color = "info" },
                    new { Type = "ENTP", Name = "Người Phát Minh (Inventor)", Color = "warning" },
                    new { Type = "ESTJ", Name = "Người Giám Sát (Supervisors)", Color = "danger" },
                    new { Type = "ESFP", Name = "Người Trình Diễn (Performer)", Color = "dark" },
                    new { Type = "ESFJ", Name = "Người cung cấp (Provider)", Color = "primary" },
                    new { Type = "ESTP", Name = "Người Đề Xướng (Promoter)", Color = "success" },
                    new { Type = "INFJ", Name = "Người Cố Vấn (Counselor)", Color = "info" },
                    new { Type = "INFP", Name = "Người Hòa Giải (Mediator)", Color = "warning" },
                    new { Type = "INTJ", Name = "Người Phân Tích (Analyst)", Color = "danger" },
                    new { Type = "INTP", Name = "Nhà Logic Học (Logician)", Color = "dark" },
                    new { Type = "ISFJ", Name = "Người Nuôi Dưỡng (Nurturer)", Color = "primary" },
                    new { Type = "ISFP", Name = "Nhà Soạn Nhạc (Composer)", Color = "success" },
                    new { Type = "ISTJ", Name = "Người Thanh Tra (Inspector)", Color = "info" },
                    new { Type = "ISTP", Name = "Thợ Thủ Công (Crafter)", Color = "warning" }
                    };
                    }

                    @foreach (var personality in personalityTypes)
                    {
                        <div class="personality-card flex-shrink-0 mx-2">
                            <div class="card h-100 shadow-sm">
                                <div class="card-body text-center">
                                    <div class="personality-badge bg-@personality.Color text-white rounded-circle mx-auto mb-3 d-flex align-items-center justify-content-center">
                                        <span class="fw-bold">@personality.Type</span>
                                    </div>
                                    <h5 class="card-title">@personality.Type</h5>
                                    <p class="card-text text-muted small">@personality.Name</p>
                                    <a href="/PersonalityTypes/@personality.Type" class="btn btn-outline-@personality.Color btn-sm">Xem chi tiết</a>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
       

        <div class="text-center mt-5">
            <a href="/PersonalityTypes" class="btn btn-primary btn-lg">Xem tất cả nhóm tính cách</a>
        </div>

        <div id="what-is-mbti" class="reveal-container" bis_skin_checked="1">
            <div class="container what-is-mbti" bis_skin_checked="1">
                <h2 class="what-is-mbti_title">
                    Trắc nghiệm tính cách MBTI là gì?
                </h2>

               
                    <div class="what-is-mbti_desc-content" bis_skin_checked="1">
                        <p>
                            <span class="text-bold">Trắc nghiệm tính cách MBTI</span> <span class="text-ilatic">(Myers-Briggs Type Indicator)</span> là một phương pháp sử dụng hàng loạt các câu
                            hỏi trắc nghiệm để phân tích tính cách con người. Kết quả trắc nghiệm MBTI chỉ ra cách con người
                            nhận thức thế giới xung quanh và ra quyết định cho mọi vấn đề trong cuộc sống.
                        </p>
                        <p>
                            Hiện nay, MBTI được coi là công cụ khám phá tính cách phổ biến và chính xác nhất trên thế giới.
                            Trong công việc, MBTI giúp mỗi cá nhân có thêm thông tin để định hướng và lựa chọn nghề nghiệp. Nhà
                            tuyển dụng cũng có thể sử dụng MBTI để đánh giá mức độ phù hợp của ứng viên với vị trí công việc và
                            văn hoá doanh nghiệp.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <img src="https://cdn-new.topcv.vn/unsafe/https://static.topcv.vn/v4/image/mbti/mbti-body-line.png" class="mbti-body-line" alt="MBTI line">
    </div>
    </style>

    <style>
        ..bg-light {
            
            background-color: #85E695 !important;
        }

        #what-is-mbti {
            margin-top: 30px;
        }

        .mbti-body-line{
			padding-left: 20px;
		}
      

        .personality-carousel {
            padding: 0 40px;
        }

        .personality-track {
            transition: transform 0.1s ease; /* Tăng tốc độ chuyển động */
            padding: 10px 0;
        }

        .personality-card {
            width: 250px;
            transition: transform 0.3s;
        }

            .personality-card:hover {
                transform: translateY(-5px);
            }

        .btn-nav {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

            .btn-nav:hover {
                background-color: #4e73df;
                color: white;
            }

            .btn-nav.prev {
                left: 20px;
            }

            .btn-nav.next {
                right: 20px;
            }

        .personality-badge {
            width: 60px;
            height: 60px;
            font-size: 1.1rem;
        }

        .section-title {
            position: relative;
            padding-bottom: 1rem;
            font-weight: 700;
        }

            .section-title:after {
                content: '';
                position: absolute;
                bottom: 0;
                left: 50%;
                transform: translateX(-50%);
                width: 80px;
                height: 4px;
                background: linear-gradient(135deg, #4e73df 0%, #6f42c1 100%);
                border-radius: 2px;
            }

        .z-3 {
            z-index: 3;
        }
    </style>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const track = document.querySelector('.personality-track');
            const cards = document.querySelectorAll('.personality-card');
            const nextBtn = document.querySelector('.btn-nav.next');
            const prevBtn = document.querySelector('.btn-nav.prev');
            const cardWidth = cards[0].offsetWidth + parseInt(getComputedStyle(cards[0]).marginRight) * 2;
            let position = 0;
            const maxPosition = -((cards.length - 4) * cardWidth);

            // Tăng tốc độ auto-scroll: giảm thời gian từ 3000ms xuống 2000ms
            let autoScrollInterval = setInterval(() => {
                if (position <= maxPosition) {
                    position = 0;
                } else {
                    position -= cardWidth;
                }
                track.style.transform = `translateX(${position}px)`;
            }, 1000); // Tốc độ nhanh hơn

            // Next button
            nextBtn.addEventListener('click', function() {
                clearInterval(autoScrollInterval);
                if (position > maxPosition) {
                    position -= cardWidth;
                    track.style.transform = `translateX(${position}px)`;
                }
                // Khởi động lại auto-scroll sau khi click
                restartAutoScroll();
            });

            // Previous button
            prevBtn.addEventListener('click', function() {
                clearInterval(autoScrollInterval);
                if (position < 0) {
                    position += cardWidth;
                    track.style.transform = `translateX(${position}px)`;
                }
                // Khởi động lại auto-scroll sau khi click
                restartAutoScroll();
            });

            // Hàm khởi động lại auto-scroll
            function restartAutoScroll() {
                clearInterval(autoScrollInterval);
                autoScrollInterval = setInterval(() => {
                    if (position <= maxPosition) {
                        position = 0;
                    } else {
                        position -= cardWidth;
                    }
                    track.style.transform = `translateX(${position}px)`;
                }, 2000);
            }

            // Pause auto-scroll on hover
            const carousel = document.querySelector('.personality-carousel');
            carousel.addEventListener('mouseenter', function() {
                clearInterval(autoScrollInterval);
            });

            carousel.addEventListener('mouseleave', function() {
                restartAutoScroll();
            });

            // Handle touch events for mobile
            let startX, moveX;
            track.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
                clearInterval(autoScrollInterval);
            });

            track.addEventListener('touchmove', function(e) {
                moveX = e.touches[0].clientX;
                const diff = moveX - startX;
                track.style.transform = `translateX(${position + diff}px)`;
            });

            track.addEventListener('touchend', function(e) {
                const diff = moveX - startX;
                if (Math.abs(diff) > 50) {
                    if (diff > 0 && position < 0) {
                        // Swipe right - show previous
                        position += cardWidth;
                    } else if (diff < 0 && position > maxPosition) {
                        // Swipe left - show next
                        position -= cardWidth;
                    }
                }
                track.style.transform = `translateX(${position}px)`;

                // Restart auto-scroll
                restartAutoScroll();
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- How It Works Section -->
<section class="py-5">
    <div class="container">
        <h2 class="section-title">CareerMatch Hoạt Động Như Thế Nào?</h2>
        <div class="row">
            <div class="col-md-4 text-center mb-4">
                <div class="mb-3">
                    <i class="fas fa-clipboard-list fa-3x text-primary"></i>
                </div>
                <h4>Làm Bài Test</h4>
                <p>Hoàn thành bài trắc nghiệm MBTI gồm 76 câu hỏi đơn giản</p>
            </div>
            <div class="col-md-4 text-center mb-4">
                <div class="mb-3">
                    <i class="fas fa-chart-pie fa-3x text-primary"></i>
                </div>
                <h4>Nhận Kết Quả</h4>
                <p>Nhận kết quả phân tích chi tiết về nhóm tính cách của bạn</p>
            </div>
            <div class="col-md-4 text-center mb-4">
                <div class="mb-3">
                    <i class="fas fa-briefcase fa-3x text-primary"></i>
                </div>
                <h4>Khám Phá Nghề Nghiệp</h4>
                <p>Khám phá các ngành nghề phù hợp nhất với tính cách MBTI của bạn</p>
            </div>
        </div>
        <style>
                .col-md-4 text-center mb-4{
					background-color: #85E695 !important;
				}
            </style>
    </div>
</section>

<!-- Test Preview Section -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h2>Bài Test MBTI Chuẩn</h2>
                <p>Bài trắc nghiệm MBTI của chúng tôi được xây dựng dựa trên tiêu chuẩn quốc tế, giúp xác định chính xác nhóm tính cách của bạn.</p>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success me-2"></i> 76 câu hỏi được chuẩn hóa</li>
                    <li><i class="fas fa-check text-success me-2"></i> Thời gian làm bài: 15-20 phút</li>
                    <li><i class="fas fa-check text-success me-2"></i> Kết quả chi tiết và cá nhân hóa</li>
                    <li><i class="fas fa-check text-success me-2"></i> Đề xuất nghề nghiệp phù hợp</li>
                </ul>
                <a asp-controller="CareerTest" asp-action="Test" class="btn btn-primary mt-3">Bắt Đầu Làm Bài Test</a>
            </div>
            <div class="col-md-6">
                    <img data-src="https://cdn-new.topcv.vn/unsafe/https://static.topcv.vn/v4/image/mbti/mbti-message-image.png" alt="MBTI message image" class="mbti-message__image lazyloaded" src="https://cdn-new.topcv.vn/unsafe/https://static.topcv.vn/v4/image/mbti/mbti-message-image.png">
            </div>
        </div>
    </div>
</section>



@section Scripts {
    <script>
        // Xử lý modal hiển thị thông tin tính cách
        var personalityModal = document.getElementById('personalityModal');
        personalityModal.addEventListener('show.bs.modal', function (event) {
            var button = event.relatedTarget;
            var personalityType = button.getAttribute('data-type');

            // Cập nhật nội dung modal dựa trên personalityType
            var modalTitle = personalityModal.querySelector('.modal-title');
            modalTitle.textContent = personalityType;

            // Trong thực tế, bạn sẽ gọi API để lấy thông tin chi tiết
            // Ở đây tôi chỉ minh họa với dữ liệu tĩnh
            var personalityData = {
                'INTJ': {
                    name: 'Nhà chiến lược',
                    desc: 'INTJ là những người có tầm nhìn xa, có khả năng phân tích và lập kế hoạch chiến lược. Họ độc lập, quyết đoán và luôn hướng đến mục tiêu.',
                    strengths: ['Tư duy chiến lược và logic', 'Độc lập và quyết đoán', 'Khả năng phân tích xuất sắc', 'Sáng tạo và nguyên bản'],
                    careers: ['Nhà khoa học', 'Kỹ sư phần mềm', 'Nhà nghiên cứu', 'Quản lý dự án', 'Chiến lược gia', 'Doanh nhân']
                }
                // Thêm dữ liệu cho các nhóm tính cách khác...
            };

            var data = personalityData[personalityType] || {
                name: 'Nhà ' + personalityType,
                desc: 'Thông tin chi tiết về nhóm tính cách ' + personalityType + ' sẽ được cập nhật sau.',
                strengths: ['Đang cập nhật...'],
                careers: ['Đang cập nhật...']
            };

            personalityModal.querySelector('#modalPersonalityName').textContent = data.name;
            personalityModal.querySelector('#modalPersonalityDesc').textContent = data.desc;

            // Cập nhật ưu điểm
            var strengthsList = personalityModal.querySelector('#modalPersonalityStrengths');
            strengthsList.innerHTML = '';
            data.strengths.forEach(function(strength) {
                var li = document.createElement('li');
                li.textContent = strength;
                strengthsList.appendChild(li);
            });

            // Cập nhật nghề nghiệp
            var careersContainer = personalityModal.querySelector('#modalPersonalityCareers');
            careersContainer.innerHTML = '';

            var half = Math.ceil(data.careers.length / 2);
            var firstCol = data.careers.slice(0, half);
            var secondCol = data.careers.slice(half);

            var col1 = document.createElement('div');
            col1.className = 'col-md-6';
            var ul1 = document.createElement('ul');
            firstCol.forEach(function(career) {
                var li = document.createElement('li');
                li.textContent = career;
                ul1.appendChild(li);
            });
            col1.appendChild(ul1);

            var col2 = document.createElement('div');
            col2.className = 'col-md-6';
            var ul2 = document.createElement('ul');
            secondCol.forEach(function(career) {
                var li = document.createElement('li');
                li.textContent = career;
                ul2.appendChild(li);
            });
            col2.appendChild(ul2);

            careersContainer.appendChild(col1);
            careersContainer.appendChild(col2);

            // Cập nhật link làm bài test
            personalityModal.querySelector('#modalTestLink').href = '/CareerTest';
        });
    </script>
}